{% extends "dashboard/_base.html" %}
{% load i18n %}

{% block page_title %}{% trans "Overview" %}{% endblock %}
{% block page_subtitle %}{% trans "Your store performance (real data)." %}{% endblock %}

{% block content %}

<section class="dash__kpi-grid">
  <div class="card dash__kpi-card">
    <div class="dash__kpi-label">{% trans "Sales today" %}</div>
    <div class="dash__kpi-value">{{ metrics.sales_today }} {{ tenant.currency|default:"SAR" }}</div>
  </div>
  <div class="card dash__kpi-card">
    <div class="dash__kpi-label">{% trans "Orders today" %}</div>
    <div class="dash__kpi-value">{{ metrics.orders_today }}</div>
  </div>
  <div class="card dash__kpi-card">
    <div class="dash__kpi-label">{% trans "Revenue (7 days)" %}</div>
    <div class="dash__kpi-value">{{ metrics.revenue_7d }} {{ tenant.currency|default:"SAR" }}</div>
  </div>
  <div class="card dash__kpi-card">
    <div class="dash__kpi-label">{% trans "Visitors (7 days)" %}</div>
    <div class="dash__kpi-value">{{ metrics.visitors_7d|default:0 }}</div>
  </div>
</section>

<section class="dash__overview-grid stack-16">
  <section class="card dash__section">
    <div class="dash__section-header">
      <div class="stack-8">
        <h2 class="dash__section-title">{% trans "Recent orders" %}</h2>
        <p class="dash__section-note">{% trans "Last 10 orders for this store." %}</p>
      </div>
      <a class="btn btn-soft" href="{% url 'tenants:dashboard_orders' %}">{% trans "View all" %}</a>
    </div>

    <div class="dash__table-wrap">
      <table class="dash__table">
      <thead>
        <tr>
          <th>{% trans "Order" %}</th>
          <th>{% trans "Customer" %}</th>
          <th>{% trans "Status" %}</th>
          <th class="dash__cell-end">{% trans "Total" %}</th>
          <th>{% trans "Created" %}</th>
        </tr>
      </thead>
      <tbody>
        {% if metrics.recent_orders %}
          {% for o in metrics.recent_orders %}
            <tr>
              <td>#{{ o.id }}</td>
              <td>{{ o.customer_name|default:"â€”" }}</td>
              <td><span class="dash__status">{{ o.status }}</span></td>
              <td class="dash__cell-end">{{ o.total }} {{ tenant.currency|default:"SAR" }}</td>
              <td>{{ o.created_at|date:"Y-m-d H:i" }}</td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="5" class="muted">{% trans "No orders yet." %}</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
    </div>
  </section>

  <section class="card dash__section">
    <div class="dash__section-header">
      <div class="stack-8">
        <h2 class="dash__section-title">{% trans "Quick actions" %}</h2>
        <p class="dash__section-note">{% trans "Jump to key areas of your store." %}</p>
      </div>
    </div>
    <div class="dash__quick-grid">
      <a class="dash__quick-link" href="{% url 'tenants:dashboard_orders' %}">{% trans "Orders" %}</a>
      <a class="dash__quick-link" href="{% url 'ai_web:dashboard_ai_tools' %}">{% trans "AI Tools" %}</a>
      <a class="dash__quick-link" href="{% url 'settlements_web:dashboard_settlements_list' %}">{% trans "Settlements" %}</a>
      <a class="dash__quick-link" href="{% url 'themes_web:dashboard_themes' %}">{% trans "Themes" %}</a>
      <a class="dash__quick-link" href="{% url 'imports_web:dashboard_import' %}">{% trans "Imports" %}</a>
      <a class="dash__quick-link" href="{% url 'exports_web:dashboard_exports' %}">{% trans "Exports" %}</a>
      <a class="dash__quick-link" href="{% url 'analytics_web:dashboard_analytics_events' %}">{% trans "Analytics" %}</a>
      <a class="dash__quick-link" href="{% url 'tenants:store_settings_update' %}">{% trans "Store settings" %}</a>
    </div>
  </section>
</section>

{% endblock %}
