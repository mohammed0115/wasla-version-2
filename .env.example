# WASLA Environment Configuration
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!
# 
# Generate a SECRET_KEY with: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# Or: openssl rand -hex 32

# ============================================================================
# DJANGO CORE SETTINGS (Security Critical)
# ============================================================================

# SECURITY: MUST be False in production. True only for development.
DEBUG=False

# SECURITY: Generate a strong random key (min 50 chars). Different per environment.
# Production: Use a cryptographically secure random string (50+ characters)
# Development: Can use a simple string, but still make it long
# Generate: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=django-insecure-your-extremely-long-random-secret-key-change-this-in-production-minimum-50-characters

# SECURITY: Allowed hosts for your domain. Prevent Host header attacks.
# Format: domain1.com,domain2.com,www.domain1.com
# Development: localhost,127.0.0.1
# Production: yourdomain.com,www.yourdomain.com
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com,www.yourdomain.com

# SECURITY: CSRF and CORS Origins - Allow only your frontend domains
# Comma-separated list of URLs that can make requests to your API
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://localhost:5173,https://yourdomain.com,https://www.yourdomain.com

# SECURITY: CORS allowed origins (if using django-cors-headers)
# Comma-separated list - only include trusted frontend URLs
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://yourdomain.com,https://www.yourdomain.com

# SECURITY: Enable HTTPS over HTTP (set to True in production)
SECURE_SSL_REDIRECT=False

# SECURITY: Add strict transport security header (set to True in production with HTTPS)
SECURE_HSTS_SECONDS=31536000

# SECURITY: Trust X-Forwarded-Proto header from reverse proxy (Nginx/CloudFlare)
SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database selection: mysql, postgresql, or sqlite
# Default: mysql (recommended)
# Options: mysql | postgresql | sqlite
DB_ENGINE=django.db.backends.mysql
DJANGO_DB_DEFAULT=mysql

# MySQL Database Configuration
MYSQL_DB_NAME=wasla
MYSQL_DB_USER=wasla_user
# SECURITY: Use a strong password (16+ chars, mixed case, numbers, symbols)
MYSQL_DB_PASSWORD=your-very-secure-mysql-password-16-chars-minimum
MYSQL_DB_HOST=localhost
MYSQL_DB_PORT=3306
# SECURITY: MySQL Root password (for initial setup only)
MYSQL_ROOT_PASSWORD=your-very-secure-root-password-change-immediately

# PostgreSQL Database Configuration (if using PostgreSQL)
PG_DB_NAME=wasla
PG_DB_USER=wasla_user
# SECURITY: Use a strong password (16+ chars, mixed case, numbers, symbols)
PG_DB_PASSWORD=your-very-secure-postgres-password-16-chars-minimum
PG_DB_HOST=localhost
PG_DB_PORT=5432

# Backup Configuration
# SECURITY: Strategy for database backups (daily, weekly, hourly)
DB_BACKUP_STRATEGY=daily
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_DIRECTORY=/var/backups/wasla

# ============================================================================
# CACHE & SESSION CONFIGURATION
# ============================================================================

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
# SECURITY: Set Redis password in production
# REDIS_PASSWORD=your-secure-redis-password

# Cache Configuration
CACHE_BACKEND=django.core.cache.backends.redis.RedisCache
CACHE_LOCATION=redis://redis:6379/1
CACHE_TIMEOUT=3600

# Session Configuration
SESSION_ENGINE=django.contrib.sessions.backends.cache
SESSION_CACHE_ALIAS=default

# ============================================================================
# EMAIL CONFIGURATION (Notifications & Verification)
# ============================================================================

# Email Backend (SMTP)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# Gmail: smtp.gmail.com
# SendGrid: smtp.sendgrid.net
# AWS SES: email-smtp.region.amazonaws.com
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
# SECURITY: Use app-specific password, not actual password
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-gmail-app-password
# SECURITY: Email for sending notifications
DEFAULT_FROM_EMAIL=noreply@yourdomain.com
# Admin email for error notifications
ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# PAYMENT PROVIDER WEBHOOK SECRETS (Security Critical)
# ============================================================================
# SECURITY: These are used to verify webhook requests from payment providers.
# Never expose these in logs or to users. Verify HMAC signatures on all webhooks.

# Tap (GCC Payment Gateway)
TAP_API_KEY=pk_live_your_tap_api_key
TAP_SECRET_KEY=sk_live_your_tap_secret_key
# SECURITY: Webhook signing secret from Tap dashboard
TAP_WEBHOOK_SECRET=whsec_your_tap_webhook_secret_key
TAP_MERCHANT_ID=your-merchant-id
TAP_SANDBOX=False

# Stripe
STRIPE_API_KEY=sk_live_your_stripe_secret_key
# SECURITY: Get from Stripe dashboard > Webhooks > Signing secret
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret
STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key
STRIPE_SANDBOX=False

# PayPal
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_SECRET=your-paypal-client-secret
# SECURITY: Webhook signing certificate ID from PayPal dashboard
PAYPAL_WEBHOOK_ID=your-paypal-webhook-id
PAYPAL_SANDBOX=False

# Apple Pay
APPLE_PAY_MERCHANT_ID=merchant.com.yourdomain
APPLE_PAY_CERTIFICATE_PATH=/path/to/apple-pay-certificate.p8

# Google Pay
GOOGLE_PAY_MERCHANT_ID=your-google-merchant-id

# ============================================================================
# STORAGE CONFIGURATION (AWS S3 or Local)
# ============================================================================

# Use S3 for media files (False for local, True for production)
USE_S3=False

# AWS S3 Configuration (if USE_S3=True)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_STORAGE_BUCKET_NAME=wasla-media-bucket
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=https://cdn.yourdomain.com
# SECURITY: Set S3 bucket to private, only serve through CloudFront

# ============================================================================
# SMS CONFIGURATION
# ============================================================================

# Twilio Configuration
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# MONITORING & ERROR TRACKING (for production)
# ============================================================================

# Sentry (Error Tracking & Monitoring)
# Get from: https://sentry.io/ > Projects > your-project > Settings > Client Keys (DSN)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=1.0.0
SENTRY_TRACES_SAMPLE_RATE=0.1

# Datadog (Application Performance Monitoring)
# DATADOG_API_KEY=your-datadog-api-key
# DATADOG_SITE=us5.datadoghq.com

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
# Log file location
LOG_FILE=/var/log/wasla/debug.log

# ============================================================================
# ANALYTICS & TRACKING
# ============================================================================

# Google Analytics
GOOGLE_ANALYTICS_ID=
GOOGLE_ANALYTICS_PROPERTY_ID=

# Hotjar (session recording)
HOTJAR_SITE_ID=

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================

# API URL for frontend
VITE_API_URL=http://localhost:8000/api
VITE_APP_NAME=WASLA
VITE_APP_VERSION=1.0.0

# Frontend environment
VITE_ENVIRONMENT=development

# ============================================================================
# DOCKER & SERVICE CONFIGURATION
# ============================================================================

# Service Ports (for Docker)
BACKEND_PORT=8000
FRONTEND_PORT=5173
DB_PORT=3306
REDIS_PORT=6379
NGINX_PORT=80
NGINX_SSL_PORT=443

# ============================================================================
# ADMIN PANEL (Change in production!)
# ============================================================================
# SECURITY: Change these immediately in production!
# Generate strong password: openssl rand -base64 16

ADMIN_USER=admin
ADMIN_PASSWORD=admin123
ADMIN_EMAIL=admin@wasla.local

# ============================================================================
# CELERY & ASYNC TASKS CONFIGURATION
# ============================================================================

# Celery Broker (Message Queue)
CELERY_BROKER_URL=redis://redis:6379/0
# Celery Result Backend (Store task results)
CELERY_RESULT_BACKEND=redis://redis:6379/0
# Timezone for scheduled tasks
CELERY_TIMEZONE=UTC

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Environment: development, staging, production
ENVIRONMENT=development

# Application language/locale
LANGUAGE_CODE=en-us
TIME_ZONE=UTC

# Version
APP_VERSION=1.0.0
BUILD_NUMBER=1

# Feature flags (can be toggled without deployment)
FEATURE_PAYMENT_TESTING=True
FEATURE_ANALYTICS=True
FEATURE_NOTIFICATIONS=True

# ============================================================================
# SECURITY BEST PRACTICES CHECKLIST
# ============================================================================
# 
# Before deploying to production, ensure:
#
# AUTO-CONFIGURED BY deploy.sh (✓ Already Done):
# ✓ [✓] Database password is strong (16+ chars, mixed case, symbols)
# ✓ [✓] Database user created with proper privileges
# ✓ [✓] Database and tables initialized
# ✓ [✓] Django migrations applied
# ✓ [✓] All secrets stored in .env (generated by deploy.sh)
# ✓ [✓] .env is in .gitignore (configured automatically)
#
# MANUAL CONFIGURATION REQUIRED (⚠ Must Complete):
# ⚠ [ ] SECRET_KEY - Generate new strong random string (50+ chars) - DIFFERENT per environment
# ⚠ [ ] DEBUG = False - Set before production (default: False)
# ⚠ [ ] ALLOWED_HOSTS - Configure for your domain (yourdomain.com,www.yourdomain.com)
# ⚠ [ ] SECURE_SSL_REDIRECT = True - Set when SSL certificate installed
# ⚠ [ ] SECURE_HSTS_SECONDS - Set to 31536000 in production with HTTPS
# ⚠ [ ] All payment webhook secrets - Get from Tap, Stripe, PayPal dashboards
# ⚠ [ ] Email configuration - Set up email provider credentials
# ⚠ [ ] Redis password - Set REDIS_PASSWORD in production (currently empty)
# ⚠ [ ] AWS keys - Limit to specific S3 bucket access (IAM policy)
# ⚠ [ ] Admin credentials - Change from defaults (admin/admin123)
# ⚠ [ ] CORS_ALLOWED_ORIGINS - Restrict to your frontend domain(s)
# ⚠ [ ] Sentry/monitoring - Configure SENTRY_DSN for error tracking
# ⚠ [ ] Database backup strategy - Verify DB_BACKUP_STRATEGY set to daily/weekly
# ⚠ [ ] Logging level - Set LOG_LEVEL=WARNING in production (default: INFO)
# ⚠ [ ] SSL certificate - Install Let's Encrypt or purchase certificate
# ⚠ [ ] Regular backups - Test backup/restore procedures monthly
#
# QUICK START AFTER deploy.sh:
# 1. $ python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# 2. Update .env with: SECRET_KEY, ALLOWED_HOSTS, payment secrets, email config
# 3. $ source venv/bin/activate
# 4. $ python manage.py createsuperuser (create admin user)
# 5. $ python manage.py changepassword admin (set secure password)
# 6. $ python manage.py collectstatic --noinput
# 7. Test application before going live
#
# For production checklist details, see: docs/ENV_CONFIGURATION.md
